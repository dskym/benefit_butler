# Benefit Butler — Feature Proposals

> 브레인스토밍 결과물 (2026-02-22)
> 자동화 & 데이터 편의성 방향으로 결정. 첫 번째 구현 대상: AI 자동 분류.

---

## 구현 우선순위 요약

| 우선순위 | 기능 | 방향 |
|----------|------|------|
| **1** | AI 자동 분류 | 자동화 |
| 2 | 정기 지출 감지 | 자동화 |
| 3 | 영수증/가맹점 정규화 | 데이터 편의성 |
| 4 | 스마트 예산 알림 | 자동화 |
| 5 | 카드별 혜택 시뮬레이터 | 데이터 편의성 |
| 6 | 연간 지출 리포트 | 데이터 편의성 |
| 7 | 소비 패턴 인사이트 | 데이터 편의성 |
| 8 | 분할 결제 추적 | 데이터 편의성 |
| 9 | 외화 자동 환산 | 데이터 편의성 |
| 10 | 가계부 공유 | 협업 |

---

## 기능 상세

### 1. AI 자동 분류 (Auto-categorization)
**개요:** 거래 입력 시 가맹점명(description)을 기반으로 카테고리를 자동 추천.

**핵심 결정:**
- API 호출 없음 — transactionStore 로컬 히스토리 + 프론트 내장 키워드 규칙만 사용
- 처리 순서: 히스토리 우선 → 키워드 매칭 → 없으면 null
- 최근 300건만 검색 (O(300) 고정) + 150ms debounce

**UX:**
- 카테고리 미선택 + 추천 있음 → 칩 자동 선택 + "추천" 뱃지
- 카테고리 선택됨 + 추천 있음 → 기존 선택 유지 + "💡" 힌트 뱃지
- 사용자 직접 클릭 → 수동 모드 (뱃지 사라짐)

---

### 2. 정기 지출 감지 (Recurring Expense Detection)
**개요:** 매월 비슷한 날짜, 비슷한 금액으로 반복되는 지출을 자동 감지하여 "정기 지출" 태그 부착.

**방식:**
- 지난 3개월 거래에서 동일 가맹점 + 유사 금액(±10%) + 동일 월 주기 패턴 탐지
- 프론트엔드 순수 연산, API 불필요

**활용:** 월 고정 지출 요약 카드, 구독 서비스 관리

---

### 3. 영수증/가맹점 정규화 (Merchant Name Normalization)
**개요:** "스타벅스 강남점", "STARBUCKS KOREA 10341" 등 동일 가맹점의 다양한 표기를 하나로 통일.

**방식:**
- 정규화 사전(merchant alias map) 관리
- 알 수 없는 가맹점은 사용자가 "같은 곳으로 설정" 가능

**효과:** 카테고리 히스토리 정확도 향상, 지출 통계 신뢰도 증가

---

### 4. 스마트 예산 알림 (Smart Budget Alert)
**개요:** 설정한 카테고리별 월 예산의 80% 도달 시 앱 내 알림.

**방식:**
- 매 거래 저장 시 해당 카테고리 월 누적 vs. 예산 비교
- 예산 설정 UI는 SettingsScreen에 추가

**알림 채널:** 앱 내 토스트 + 홈 대시보드 경고 카드

---

### 5. 카드별 혜택 시뮬레이터 (Card Benefit Simulator)
**개요:** "이 가맹점에서 어느 카드로 결제하면 가장 이득인가?" 를 보유 카드 혜택 데이터 기반으로 계산.

**방식:**
- 카드 메타데이터(혜택 조건, 적립률) 로컬 저장
- 가맹점 업종 태그 → 카드별 혜택률 매칭 → 최고 혜택 카드 추천

**연계:** 카드 실적 트래커(CLAUDE.md Core Feature 4)와 통합

---

### 6. 연간 지출 리포트 (Annual Spending Report)
**개요:** 연도별 지출 총계, 카테고리별 비율, 전년 대비 증감 시각화.

**방식:**
- 기존 AnalysisScreen 확장
- 연간 뷰 탭 추가, 바 차트 → 도넛 차트 전환

**출력:** PDF/이미지 내보내기 (react-native-share)

---

### 7. 소비 패턴 인사이트 (Spending Pattern Insights)
**개요:** "지난달 대비 외식비 23% 증가", "이번 달 가장 많이 쓴 요일은 금요일" 등 자동 생성 인사이트.

**방식:**
- 규칙 기반 템플릿 + 통계 계산 (평균, 편차, 증감률)
- 홈 대시보드 "이달의 인사이트" 섹션

---

### 8. 분할 결제 추적 (Installment Tracking)
**개요:** 카드 할부 결제를 등록하면 월별 할부금을 자동 분산 기록.

**방식:**
- 거래 생성 시 "할부" 옵션 선택 → 총액, 개월 수 입력
- 매월 해당 금액 자동 반복 거래 생성

**효과:** 미래 지출 예측 정확도 향상

---

### 9. 외화 자동 환산 (Foreign Currency Auto-conversion)
**개요:** 해외 결제 시 외화 금액 입력 → 결제일 환율로 원화 자동 환산.

**방식:**
- 환율 API (ExchangeRate-API, 무료 티어) 연동
- 오프라인 시 마지막 캐시 환율 사용

**지원 통화:** USD, JPY, EUR, CNY 우선

---

### 10. 가계부 공유 (Shared Ledger)
**개요:** 커플/가족 단위로 가계부 공유 및 공동 지출 관리.

**방식:**
- 공유 그룹 생성 → 초대 코드 발송
- 공유 거래는 모든 구성원에게 실시간 동기화

**백엔드 변경:** 거래 테이블에 `group_id` 컬럼 추가, 소켓 또는 폴링 기반 동기화

---

## 결정 근거

자동화 방향을 우선한 이유:
1. **차별화**: 단순 가계부와의 명확한 차이점
2. **수익 진입점**: 실시간 알림 파싱(CLAUDE.md Core Feature 3)으로 이어지는 기반
3. **사용자 유지**: 자동 분류는 매일 체감하는 편의성 → 이탈률 감소
